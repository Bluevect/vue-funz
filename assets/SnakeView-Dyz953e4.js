import{d as O,u as V,a as K,b as q,r as S,c as b,e as u,f as D,o as M,g,h as s,i as y,t as a,j as d,k,l as h,_ as N}from"./index-0W-_GK_W.js";import{m as r,f as $,c as _,S as T,o as W,a as E,b as F}from"./snake-DVzFegHi.js";const H={class:"canvas-container"},I=["width","height"],L={class:"score-span"},j={key:0,class:"menu"},P={key:1,class:"game-over"},U={class:"menu"},z=O({__name:"SnakeView",setup(J){const l=V(),p=q(),C=K();p.query.hasOwnProperty("lang")?(l.update(p.query.lang),C.locale.value=l.lang):S.push({path:"/snake",query:{lang:l.lang}});const A=b(()=>r.width*r.blockWidth+1),R=b(()=>r.height*r.blockHeight+1),m=u(null),c=u(0),w=u(!0),f=u(!1),B=D();let t,i;W(()=>{c.value++}),E(()=>{c.value=0,f.value=!1,w.value=!1,$(_.bg,i),window.onkeydown=e=>{const n=t.direction(),o=n==1||n==-1;if(t.getChangeFinished())switch(e.code){case"KeyW":case"ArrowUp":o&&t.direction(-r.width);break;case"KeyS":case"ArrowDown":o&&t.direction(r.width);break;case"KeyA":case"ArrowLeft":o||t.direction(-1);break;case"KeyD":case"ArrowRight":o||t.direction(1);break}}}),F(()=>{window.onkeydown=v,f.value=!0,B.update(c.value)}),M(()=>{if(i=m.value.getContext("2d"),!i)throw new Error("Failed to get canvas context");$(_.bg,i),t=new T(i),window.onkeydown=v});function v(e){e.code=="Space"&&t.start()}function G(){S.push(`/snake/settings?lang=${l.lang}`)}return(e,n)=>(h(),g("div",H,[s("canvas",{ref_key:"mapRef",ref:m,width:A.value,height:R.value},null,8,I),s("span",L,a(e.$t("snake.score"))+" "+a(c.value),1),s("button",{class:"settings-btn",onClick:G},a(e.$t("snake.settingsTxt")),1),w.value?(h(),g("h2",j,[d(a(e.$t("snake.press"))+" ",1),s("i",null,a(e.$t("snake.space")),1),d(" "+a(e.$t("snake.menuStart"))+" ",1),s("button",{class:"start-btn",onClick:n[0]||(n[0]=(...o)=>k(t).start&&k(t).start(...o))},a(e.$t("snake.startBtn")),1)])):y("",!0),f.value?(h(),g("div",P,[s("div",null,[s("span",null,a(e.$t("snake.gameOverTitle")),1),n[2]||(n[2]=s("br",null,null,-1)),s("h2",U,[d(a(e.$t("snake.press"))+" ",1),s("i",null,a(e.$t("snake.space")),1),d(" "+a(e.$t("snake.menuRestart"))+" ",1),s("button",{class:"restart-btn",onClick:n[1]||(n[1]=(...o)=>k(t).start&&k(t).start(...o))},a(e.$t("snake.restartBtn")),1)])])])):y("",!0)]))}}),Y=N(z,[["__scopeId","data-v-15f4054d"]]);export{Y as default};
